# ============================================================================
# Ansible Configuration File
# ============================================================================
#
# This file configures Ansible's behavior for this project.
#
# Configuration Precedence (highest to lowest):
# 1. ANSIBLE_* environment variables
# 2. ansible.cfg in current directory (THIS FILE)
# 3. ~/.ansible.cfg (user's home directory)
# 4. /etc/ansible/ansible.cfg (system-wide)
#
# We use a project-specific ansible.cfg to:
# - Keep configuration with the code (version controlled)
# - Ensure consistent behavior across team members
# - Document project-specific settings
#
# ============================================================================

[defaults]

# ============================================================================
# Inventory Settings
# ============================================================================

# Default inventory file
inventory = ./inventory/local.yml

# Allow using both YAML and INI inventory formats
# This is the default, but making it explicit for clarity
inventory_plugins = host_list, script, auto, yaml, ini, toml

# ============================================================================
# Connection Settings
# ============================================================================

# Number of parallel processes (increase for faster execution)
# Default: 5
# Recommendation: Set to number of CPU cores
forks = 10

# SSH timeout (seconds)
# Increase if connecting to slow/distant hosts
timeout = 10

# Use SSH connection multiplexing (reuse connections)
# Significantly speeds up playbook execution
ssh_args = -o ControlMaster=auto -o ControlPersist=60s

# Use pipelining (reduces number of SSH operations)
# Requires sudo without requiretty
pipelining = True

# ============================================================================
# Output Settings
# ============================================================================

# Use colors in terminal output (makes it easier to read)
# yes = always use colors
# no = never use colors
# auto = use colors if terminal supports it
stdout_callback = yaml

# Display skipped hosts (useful for debugging)
display_skipped_hosts = True

# Display OK host results (useful for debugging)
display_ok_hosts = True

# Show custom stats at end of playbook run
show_custom_stats = True

# Callbacks to enable (comma-separated list)
# profile_tasks: Shows time taken by each task
# timer: Shows total playbook execution time
callbacks_enabled = profile_tasks, timer

# ============================================================================
# Logging Settings
# ============================================================================

# Log all Ansible output to a file (useful for debugging)
# Comment out to disable logging
# log_path = ./ansible.log

# ============================================================================
# Role Settings
# ============================================================================

# Where to look for roles
roles_path = ./roles:~/.ansible/roles:/usr/share/ansible/roles

# ============================================================================
# Security Settings
# ============================================================================

# Don't create world-readable temp files
allow_world_readable_tmpfiles = False

# Retry files (created when playbook fails)
# Useful for resuming failed playbooks
# Set to False to disable (cleaner working directory)
retry_files_enabled = False

# Host key checking (SSH)
# For development: False (convenient)
# For production: True (security)
host_key_checking = False

# ============================================================================
# Performance Settings
# ============================================================================

# Fact gathering
# smart = gather facts unless recently cached
# implicit = always gather facts
# explicit = only gather when gather_facts: yes
gathering = smart

# Fact caching (speeds up subsequent runs)
# Options: memory, jsonfile, redis, mongodb
# jsonfile = cache facts to files
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts_cache
# Fact cache timeout (seconds) - 1 hour
fact_caching_timeout = 3600

# ============================================================================
# Privilege Escalation Settings
# ============================================================================

[privilege_escalation]

# Become settings (sudo/su)
# These are defaults; can be overridden per-task or per-playbook
become = False
become_method = sudo
become_user = root
become_ask_pass = False

# ============================================================================
# SSH Connection Settings
# ============================================================================

[ssh_connection]

# SSH arguments
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null

# Use pipelining (faster, but requires sudo without requiretty)
pipelining = True

# Transfer method
# smart = auto-detect best method
# Options: smart, sftp, scp, piped
transfer_method = smart

# ============================================================================
# Paramiko Connection Settings (Alternative to SSH)
# ============================================================================
# Paramiko is a Python SSH library (alternative to OpenSSH)
# Generally slower than OpenSSH, but useful in some environments

[paramiko_connection]

# Record host keys in known_hosts file
record_host_keys = False

# ============================================================================
# Color Settings
# ============================================================================

[colors]

# Customize output colors (ANSI color codes)
# Format: <COLOR> = <ANSI_CODE>
# Options: 0=black, 1=red, 2=green, 3=yellow, 4=blue, 5=magenta, 6=cyan, 7=white

highlight = white
verbose = blue
warn = bright purple
error = red
debug = dark gray
deprecate = purple
skip = cyan
unreachable = red
ok = green
changed = yellow
diff_add = green
diff_remove = red
diff_lines = cyan
